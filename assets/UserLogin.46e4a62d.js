import{F as _,a as g}from"./vee-validate.esm.2a74ee40.js";import{_ as m,j as u,w as f,r,o as l,a as e,d as i,I as b,c as w,i as F,F as v,J as y}from"./index.c838af49.js";import{P as L}from"./Popup.55a2dd01.js";const S={components:{Form:_,Field:g},props:{user:{type:Object,default:()=>({email:"",password:""}),required:!0}},methods:{login(){this.$emit("login:user",this.userLocal)}},data(){return{userLocal:this.user}}},k={class:"form-outline mb-4"},P=e("label",{class:"form-label float-left",for:"email"},"\u0110\u1ECBa ch\u1EC9 Email",-1),V={class:"form-outline mb-4"},$=e("label",{class:"form-label float-left",for:"password"},"M\u1EADt kh\u1EA9u",-1),C=e("button",{type:"submit",class:"btn btn-primary btn-block mb-4"}," \u0110\u0103ng nh\u1EADp ",-1);function U(o,s,t,c,n,p){const d=r("Field"),h=r("Form");return l(),u(h,{onSubmit:p.login},{default:f(()=>[e("div",k,[P,i(d,{type:"email",name:"email",class:"form-control",modelValue:n.userLocal.email,"onUpdate:modelValue":s[0]||(s[0]=a=>n.userLocal.email=a)},null,8,["modelValue"])]),e("div",V,[$,i(d,{type:"password",name:"password",class:"form-control",modelValue:n.userLocal.password,"onUpdate:modelValue":s[1]||(s[1]=a=>n.userLocal.password=a)},null,8,["modelValue"])]),C]),_:1},8,["onSubmit"])}const x=m(S,[["render",U]]),B={data(){return{user:{},status:"",isShowPopup:!1}},components:{UserFormLogin:x,Popup:L},computed:{message(){return this.status}},methods:{hidePopup(){this.isShowPopup=!1},async login(o){try{const t=await b.login(o);localStorage.setItem("SavedToken","Bearer "+t.data.token);var s=t.data.data.user;console.log(s),localStorage.setItem("User",JSON.stringify(s)),this.$emit("isShowLogin",!0),this.$router.push({name:"home"})}catch(t){t.response.data.message==="Incorrect email or password"&&this.sendErrorMessage("Sai email ho\u1EB7c m\u1EADt kh\u1EA9u \u0111\u0103ng nh\u1EADp. Vui l\xF2ng \u0111\u0103ng nh\u1EADp l\u1EA1i."),console.log(t)}},sendErrorMessage(o){this.status=o,this.isShowPopup=!0},hideHeaderAndFooter(){this.$emit("isShowHeaderAndFooter",!1)}},mounted(){this.hideHeaderAndFooter()}};const N={class:"text-center text-lg-start"},H={class:"card mb-3 rounded-t-5 rounded-tr-lg-0 rounded-bl-lg-5"},E={class:"row g-0 d-flex align-items-center justify-content-around"},I=e("div",{class:"col-lg-6 flex-center flex-column"},[e("img",{src:y,class:"w-50",alt:"ContactBook cover"}),e("h1",{class:"pt-3"},"H\u01A0N C\u1EA2 CU\u1ED0N H\xDAT")],-1),j={class:"col-lg-6"},A=e("h2",{class:"fw-bold mt-4"},"\u0110\u0103ng nh\u1EADp",-1),M={class:"card-body py-5 px-md-5"};function J(o,s){const t=r("UserFormLogin"),c=r("Popup");return l(),w(v,null,[e("section",N,[e("div",H,[e("div",E,[I,e("div",j,[A,e("div",M,[i(t,{user:o.user,"onLogin:user":o.login},null,8,["user","onLogin:user"])])])])])]),o.isShowPopup?(l(),u(c,{key:0,onCancel:o.hidePopup,message:o.message},null,8,["onCancel","message"])):F("",!0)],64)}const z=m(B,[["render",J]]);export{z as default};
